/*! premise-time-track 2017-02-10 */
!function(a){function b(){function b(){i.html(l)}function c(a){return i.html(a),d(),!1}function d(){var b=0;a(".pwptt-time-card-time").each(function(){b=parseFloat(a(this).text())+parseFloat(b),j.html(b)})}var e,f=a("#pwptt-loop-wrapper"),g=a(".pwptt-search"),h=a("#pwptt-quick-change"),i=a("#pwptt-body"),j=a(".pwptt-total-hours"),k=a(".pwptt-chrome-extension-edit"),l='<p class="pwptt-loading"><i class="fa fa-spin fa-spinner"></i></p>',m="/wp-admin/admin-ajax.php",n=function(){k.length&&(window.addEventListener("message",p,!1),o()),f.length?q():!1},o=function(){return k.length?void k.find("a").click(function(a){a.preventDefault();var b=this.href;return e.postMessage(b,"*"),!1}):!1},p=function(a){console.log(a.origin),"edit"===a.data&&(e=a.source,window.removeEventListener("message",p))},q=function(){g.length&&(g.change(r),g.keyup(function(a){13===a.keyCode?r:!1})),h.length&&h.change(function(d){return d.preventDefault(),b(),g.val(""),a.post(m,{action:"ptt_search_timers",quick_change:a(this).val(),taxonomy:g.attr("data-tax"),slug:g.attr("data-slug")},c),!1})},r=function(){var d=a(this),e=d.val()?d.val():"",f=d.attr("data-tax"),g=d.attr("data-slug"),h=new RegExp("^(([0-9]{1,2})/([0-9]{1,2})/([0-9]{2,4})) ?(-) ?(([0-9]{1,2})/([0-9]{1,2})/([0-9]{2,4}))$","g"),i=e.match(h);if(i){b();var j=i[0].split("-");a.post(m,{action:"ptt_search_timers",taxonomy:f,slug:g,date_range:{from:j[0],to:j[1]}},c)}return!1};n()}a(document).ready(function(){b()})}(jQuery);